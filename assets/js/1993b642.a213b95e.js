"use strict";(self.webpackChunkkira_documentation=self.webpackChunkkira_documentation||[]).push([[1067],{1831:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>g,frontMatter:()=>l,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"resources/tools-&-security/cosign","title":"COSIGN","description":"KIRA release files are signed using the Sigstore Cosign tool. All KIRA Release Files are signed using sigstore cosign tool. Cosign is a digital signature utility that is used to verify the authenticity and integrity of a file. When a file is signed with a digital signature, it provides a way to verify that the file has not been tampered with, and also to verify the identity of the person or entity who signed the file. It is used in Kira to sign and verify the authenticity of data, such as proprietary tools, binaries and scripts.","source":"@site/tabs/node-operators/resources/tools-&-security/cosign.mdx","sourceDirName":"resources/tools-&-security","slug":"/resources/tools-&-security/cosign","permalink":"/node-operators/resources/tools-&-security/cosign","draft":false,"unlisted":false,"editUrl":"https://github.com/KiraCore/docs.kira.network/issues/new?assignees=&labels=documentation,issue&projects=&template=report_an_issue.yaml&title=%5BISSUE+REPORT%5D&page-github=/node-operators/resources/tools-&-security/cosign&page-local=resources/tools-&-security/cosign.mdx","tags":[],"version":"current","lastUpdatedAt":1739294998000,"sidebarPosition":0,"frontMatter":{"title":"COSIGN","sidebar_position":0,"slug":"cosign"},"sidebar":"defaultSidebar","previous":{"title":"Operators Tutorials","permalink":"/node-operators/resources/operators-tutorials"},"next":{"title":"Validator Key Management","permalink":"/node-operators/resources/tools-&-security/validator-key-management"}}');var t=s(4848),i=s(8453),r=s(5537),o=s(9329);const l={title:"COSIGN",sidebar_position:0,slug:"cosign"},c=void 0,d={},u=[{value:"Installing Cosign",id:"180467da57b780209e1ce0f2b798b530",level:3},{value:"Linux",id:"197467da57b780659506f9992f642b49",level:2},{value:"Install Essential Dependencies",id:"180467da57b7803294a3fe8bf07fdec6",level:4},{value:"Download Cosign",id:"180467da57b7807298d6c328e240fc8c",level:4},{value:"Verify the Downloaded File",id:"180467da57b78077aa03cd23ad0aecf1",level:4},{value:"Saving and Using Kira\u2019s Public Key",id:"180467da57b780b0b7abd5fd96defc8d",level:4},{value:"Macos",id:"197467da57b78097a16dc9401033f3d6",level:2},{value:"Install Essential Dependencies",id:"197467da57b780419f09dec6b4486ea3",level:4},{value:"Download Cosign",id:"197467da57b780efb768ea02ff84ff60",level:4},{value:"Verify the Downloaded File",id:"197467da57b7801fa199e469b5140a5b",level:4},{value:"Saving and Using Kira\u2019s Public Key",id:"197467da57b7802ca021cf5191cf3540",level:4}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["KIRA release files are signed using the ",(0,t.jsx)(n.a,{href:"https://github.com/sigstore/cosign",children:"Sigstore Cosign tool"}),". All KIRA Release Files are signed using ",(0,t.jsx)(n.a,{href:"https://github.com/sigstore/cosign",children:"sigstore cosign tool"}),". Cosign is a digital signature utility that is used to verify the authenticity and integrity of a file. When a file is signed with a digital signature, it provides a way to verify that the file has not been tampered with, and also to verify the identity of the person or entity who signed the file. It is used in Kira to sign and verify the authenticity of data, such as proprietary tools, binaries and scripts."]}),"\n",(0,t.jsx)(n.p,{children:"To securely interact with KIRA\u2019s testnet and mainnet tools, you must install and verify the integrity of Cosign. This guide outlines the process to achieve a secure setup."}),"\n",(0,t.jsx)(n.h3,{id:"180467da57b780209e1ce0f2b798b530",children:"Installing Cosign"}),"\n",(0,t.jsxs)(r.A,{children:[(0,t.jsxs)(o.A,{value:"linux",label:"Linux",children:[(0,t.jsx)(n.h2,{id:"197467da57b780659506f9992f642b49",children:"Linux"}),(0,t.jsx)(n.h4,{id:"180467da57b7803294a3fe8bf07fdec6",children:"Install Essential Dependencies"}),(0,t.jsx)(n.p,{children:"Begin by installing the necessary tools:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"sudo -s  # Gain root permissions\napt-get install -y wget  # Install wget for downloading files\n"})}),(0,t.jsx)(n.h4,{id:"180467da57b7807298d6c328e240fc8c",children:"Download Cosign"}),(0,t.jsx)(n.p,{children:"Download the appropriate Cosign binary and its signature file:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'COSIGN_VERSION="v2.0.0" UBUNTU_AGENT="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.85 Safari/537.36" \\\nARCH=$(uname -m | grep -q "arm" && echo "arm64" || echo "amd64") PLATFORM=$(uname) FILE="cosign-${PLATFORM}-${ARCH}" cd /tmp && \\\nwget --user-agent="$UBUNTU_AGENT" https://github.com/sigstore/cosign/releases/download/${COSIGN_VERSION}/$FILE -O $FILE && \\\nwget --user-agent="$UBUNTU_AGENT" https://github.com/sigstore/cosign/releases/download/${COSIGN_VERSION}/${FILE}.sig -O ${FILE}.sig\n'})}),(0,t.jsx)(n.h4,{id:"180467da57b78077aa03cd23ad0aecf1",children:"Verify the Downloaded File"}),(0,t.jsx)(n.p,{children:"Ensure the downloaded file matches the expected checksum to confirm its integrity. This step avoids using compromised or corrupted files."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'# Expected SHA256 checksums\nCOSIGN_HASH_ARM="8132cb2fb99a4c60ba8e03b079e12462c27073028a5d08c07ecda67284e0c88d"\nCOSIGN_HASH_AMD="169a53594c437d53ffc401b911b7e70d453f5a2c1f96eb2a736f34f6356c4f2b"\n\n# Calculate the file\u2019s checksum\nFILE_HASH=$(sha256sum $FILE | awk \'{ print $1 }\')\n\n# Validate checksum\nif [ "$FILE_HASH" != "$COSIGN_HASH_ARM" ] && [ "$FILE_HASH" != "$COSIGN_HASH_AMD" ]; then\n    echo "ERROR: Checksum mismatch. Expected \'$COSIGN_HASH_ARM\' or \'$COSIGN_HASH_AMD\', but got \'$FILE_HASH\'."\n    exit 1\nfi\n'})}),(0,t.jsx)(n.p,{children:"Save cosign public key"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cat > ./sigstore-cosign.pub << EOL\n-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEhyQCx0E9wQWSFI9ULGwy3BuRklnt\nIqozONbbdbqz11hlRJy9c7SG+hdcFl9jE9uE/dwtuwU2MqU9T/cN0YkWww==\n-----END PUBLIC KEY-----\nEOL\n"})}),(0,t.jsx)(n.p,{children:"Use the saved public key to verify the downloaded Cosign binary"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:'cosign verify-blob --key="./sigstore-cosign.pub" --signature="./${FILE}.sig" "./$FILE"\n'})}),(0,t.jsx)(n.p,{children:"If verification is successful, you can trust the downloaded binary and begin using it. Make the Cosign binary executable and move it to the system\u2019s binary directory."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"chmod +x -v ./$FILE && mv -fv ./$FILE /usr/local/bin/cosign\n"})}),(0,t.jsx)(n.p,{children:"Confirm the installation by checking the Cosign version"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cosign version\n"})}),(0,t.jsx)(n.h4,{id:"180467da57b780b0b7abd5fd96defc8d",children:"Saving and Using Kira\u2019s Public Key"}),(0,t.jsx)(n.p,{children:"To verify KIRA\u2019s signed files, save the public key for Cosign releases"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'KIRA_COSIGN_PUB=/usr/keys/kira-cosign.pub && mkdir -p /usr/keys && \\\n cat > $KIRA_COSIGN_PUB << EOL\n-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE/IrzBQYeMwvKa44/DF/HB7XDpnE+\nf+mU9F/Qbfq25bBWV2+NlYMJv3KvKHNtu3Jknt6yizZjUV4b8WGfKBzFYw==\n-----END PUBLIC KEY-----\nEOL\n\n# Add key to env\necho "export KIRA_COSIGN_PUB=\\"$KIRA_COSIGN_PUB\\"" >> /etc/profile\n'})})]}),(0,t.jsxs)(o.A,{value:"macos",label:"MacOS",children:[(0,t.jsx)(n.h2,{id:"197467da57b78097a16dc9401033f3d6",children:"Macos"}),(0,t.jsx)(n.h4,{id:"197467da57b780419f09dec6b4486ea3",children:"Install Essential Dependencies"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"brew install wget\n"})}),(0,t.jsx)(n.h4,{id:"197467da57b780efb768ea02ff84ff60",children:"Download Cosign"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'COSIGN_VERSION="v2.0.0" && \\\nMAC_AGENT="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Safari/537.36" && \\\nif [[ "$(uname -m)" == *"ar"* ]] ; then ARCH="arm64"; else ARCH="amd64" ; fi && \\\n cd /tmp && PLATFORM=$(uname) && declare -l FILE="cosign-${PLATFORM}-${ARCH}" && rm -rfv ./$FILE ./${FILE}.sig && \\\n wget --user-agent="$MAC_AGENT" https://github.com/sigstore/cosign/releases/download/${COSIGN_VERSION}/$FILE -O ./$FILE && \\\n wget --user-agent="$MAC_AGENT" https://github.com/sigstore/cosign/releases/download/${COSIGN_VERSION}/${FILE}.sig -O ./${FILE}.sig\n'})}),(0,t.jsx)(n.h4,{id:"197467da57b7801fa199e469b5140a5b",children:"Verify the Downloaded File"}),(0,t.jsx)(n.p,{children:"Ensure the downloaded file matches the expected checksum to confirm its integrity. This step avoids using compromised or corrupted files."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'COSIGN_HASH_ARM="9d7821e1c05da4b07513729cb00d1070c9a95332c66d90fa593ed77d8c72ca2a" && \\\nCOSIGN_HASH_AMD="d2c8fc0edb42a1e9745da1c43a2928cee044f3b8a1b8df64088a384c7e6f5b5d" && \\\nFILE_HASH=$(shasum -a 256 ./$FILE | awk \'{ print $1 }\' | xargs || echo -n "") && \\\nif [ "$FILE_HASH" != "$COSIGN_HASH_ARM" ] && [ "$FILE_HASH" != "$COSIGN_HASH_AMD" ] ; then\n    echo "ERROR: Failed to download cosign tool, expected checksum to be \'$COSIGN_HASH_ARM\' or \'$COSIGN_HASH_AMD\', but got \'$FILE_HASH\'"\n    exit 1\nelse\n    echo "Cosign tool downloaded successfully."\nfi\n'})}),(0,t.jsx)(n.p,{children:"Save cosign public key"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cat > ./sigstore-cosign.pub << EOL\n-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEhyQCx0E9wQWSFI9ULGwy3BuRklnt\nIqozONbbdbqz11hlRJy9c7SG+hdcFl9jE9uE/dwtuwU2MqU9T/cN0YkWww==\n-----END PUBLIC KEY-----\nEOL\n"})}),(0,t.jsx)(n.p,{children:"Use the saved public key to verify the downloaded Cosign binary"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'cosign verify-blob --key="./sigstore-cosign.pub" --signature="./${FILE}.sig"  "./$FILE"\n'})}),(0,t.jsx)(n.p,{children:"If verification is successful, you can trust the downloaded binary and begin using it. Make the Cosign binary executable and move it to the system\u2019s binary directory."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"chmod +x ./$FILE && mv -fv ./$FILE /usr/local/bin/cosign \n"})}),(0,t.jsx)(n.p,{children:"Confirm the installation by checking the Cosign version"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cosign version\n"})}),(0,t.jsx)(n.h4,{id:"197467da57b7802ca021cf5191cf3540",children:"Saving and Using Kira\u2019s Public Key"}),(0,t.jsx)(n.p,{children:"To verify KIRA\u2019s signed files, save the public key for Cosign releases"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'KIRA_COSIGN_PUB="$HOME/keys/kira-cosign.pub" && mkdir -p $HOME/keys && \\\n cat > $KIRA_COSIGN_PUB << EOL\n-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE/IrzBQYeMwvKa44/DF/HB7XDpnE+\nf+mU9F/Qbfq25bBWV2+NlYMJv3KvKHNtu3Jknt6yizZjUV4b8WGfKBzFYw==\n-----END PUBLIC KEY-----\nEOL\n\n# Add key to env\necho "export KIRA_COSIGN_PUB=\\"$KIRA_COSIGN_PUB\\"" >> /etc/profile\n'})})]})]})]})}function g(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},9329:(e,n,s)=>{s.d(n,{A:()=>r});s(6540);var a=s(8215);const t={tabItem:"tabItem_Ymn6"};var i=s(4848);function r(e){let{children:n,hidden:s,className:r}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(t.tabItem,r),hidden:s,children:n})}},5537:(e,n,s)=>{s.d(n,{A:()=>E});var a=s(6540),t=s(8215),i=s(5627),r=s(6347),o=s(372),l=s(604),c=s(1861),d=s(8749);function u(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:s}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:s,attributes:a,default:t}}=e;return{value:n,label:s,attributes:a,default:t}}))}(s);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function g(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function b(e){let{queryString:n=!1,groupId:s}=e;const t=(0,r.W6)(),i=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,l.aZ)(i),(0,a.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})}),[i,t])]}function f(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,i=h(e),[r,l]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=s.find((e=>e.default))??s[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:i}))),[c,u]=b({queryString:s,groupId:t}),[f,p]=function(e){let{groupId:n}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(n),[t,i]=(0,d.Dv)(s);return[t,(0,a.useCallback)((e=>{s&&i.set(e)}),[s,i])]}({groupId:t}),m=(()=>{const e=c??f;return g({value:e,tabValues:i})?e:null})();(0,o.A)((()=>{m&&l(m)}),[m]);return{selectedValue:r,selectValue:(0,a.useCallback)((e=>{if(!g({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),p(e)}),[u,p,i]),tabValues:i}}var p=s(9136);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var I=s(4848);function v(e){let{className:n,block:s,selectedValue:a,selectValue:r,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),d=e=>{const n=e.currentTarget,s=l.indexOf(n),t=o[s].value;t!==a&&(c(n),r(t))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=l.indexOf(e.currentTarget)+1;n=l[s]??l[0];break}case"ArrowLeft":{const s=l.indexOf(e.currentTarget)-1;n=l[s]??l[l.length-1];break}}n?.focus()};return(0,I.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":s},n),children:o.map((e=>{let{value:n,label:s,attributes:i}=e;return(0,I.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>{l.push(e)},onKeyDown:u,onClick:d,...i,className:(0,t.A)("tabs__item",m.tabItem,i?.className,{"tabs__item--active":a===n}),children:s??n},n)}))})}function y(e){let{lazy:n,children:s,selectedValue:i}=e;const r=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,I.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function x(e){const n=f(e);return(0,I.jsxs)("div",{className:(0,t.A)("tabs-container",m.tabList),children:[(0,I.jsx)(v,{...n,...e}),(0,I.jsx)(y,{...n,...e})]})}function E(e){const n=(0,p.A)();return(0,I.jsx)(x,{...e,children:u(e.children)},String(n))}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var a=s(6540);const t={},i=a.createContext(t);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);