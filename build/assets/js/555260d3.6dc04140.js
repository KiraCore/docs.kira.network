"use strict";(self.webpackChunkkira_documentation=self.webpackChunkkira_documentation||[]).push([[6535],{4237:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>d,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>h});var r=t(5893),n=t(1151),a=t(4866),i=t(5162);const l={title:"Data Registry",sidebar_position:7,slug:"/data-registry"},d=void 0,c={id:"backend---sekai/modules/governance/data-registry",title:"Data Registry",description:"Overview",source:"@site/tabs/docs/backend---sekai/modules/governance/data-registry.mdx",sourceDirName:"backend---sekai/modules/governance",slug:"/data-registry",permalink:"/docs/data-registry",draft:!1,unlisted:!1,editUrl:"https://github.com/KiraCore/docs.kira.network/issues/new?assignees=&labels=documentation,issue&projects=&template=report_an_issue.yaml&title=%5BISSUE+REPORT%5D&page-github=/docs/data-registry&page-local=backend---sekai/modules/governance/data-registry.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"Data Registry",sidebar_position:7,slug:"/data-registry"},sidebar:"defaultSidebar",previous:{title:"Identity Registrar",permalink:"/docs/identity-registrar"},next:{title:"Poor Network Conditions",permalink:"/docs/poor-network-conditions"}},o={},h=[{value:"Overview",id:"9a52cc45f0bf457e85fdaedef9706fa6",level:2},{value:"Code of Conduct",id:"aee73893689d4ce6a84e3b3216c48610",level:3},{value:"Parameters",id:"6495b76427444740ba614d6beacf29bc",level:2},{value:"CLI Syntax &amp; Examples",id:"aa1f125af47f4ab7886fd90029d3380c",level:2},{value:"Transactions",id:"cc4eddd5aac24ddb9729522a78cf8320",level:2},{value:"Queries",id:"798c5d84060149699bbef79082f10ee0",level:2},{value:"Query All Keys",id:"281888dffb9e4bc28f293e3f95c9ce67",level:4},{value:"Query Data by Key",id:"9abdf7548d2343979a7f7ad7a714d03f",level:4},{value:"Governance",id:"ef81400b9e8b406d93ba0411684f97f8",level:2},{value:"Create or Edit a Data Registrey Key",id:"47c2dcd1257a49ccbfae4ad5fdcf49cf",level:4}];function u(e){const s={a:"a",admonition:"admonition",annotation:"annotation",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"9a52cc45f0bf457e85fdaedef9706fa6",children:"Overview"}),"\n",(0,r.jsxs)(s.p,{children:["The Data Registry is a curated data reference storage under governance. Its primary role is to sidestep the constraints of on-chain storage by providing references to external data resources, like those found on IPFS or GitHub. By doing so, the Data Registry ensures that large files or extended data sequences aren't directly stored on-chain. Instead, it archives external URLs, metalinks, and various distributed references. A pivotal aspect of the Data Registry is its ability to vouch for the authenticity and integrity of the external data. This is achieved via on-chain checksums, bolstering trustworthiness by verifying the consistency of hosted data. Furthermore, the Data Registry enriches the stored references by supplying supplementary information, including file size and encoding. Akin to how the ",(0,r.jsx)(s.a,{href:"/docs/identity-registrar",children:"Identity Registrar"})," assures the legitimacy and uniqueness of user identities, the Data Registry offers a secure, reliable bridge between the on-chain network and the vast external data world."]}),"\n",(0,r.jsx)(s.h3,{id:"aee73893689d4ce6a84e3b3216c48610",children:"Code of Conduct"}),"\n",(0,r.jsxs)(s.p,{children:["An integral property of the Data Registry is the ",(0,r.jsx)(s.code,{children:"code_of_conduct"}),". This can be perceived as the Service-layer Agreement bridging network governance and its users. This off-chain text serves as a guiding beacon, delineating the expected conduct of network participants. In essence, it acts as the network's constitution, providing insights and guidelines to users and incoming governance members alike."]}),"\n",(0,r.jsx)(s.h2,{id:"6495b76427444740ba614d6beacf29bc",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"NAME"}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"TYPE"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"EXAMPLE"})}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.strong,{children:"DESCRIPTION"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"key"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"doc1"})}),(0,r.jsx)(s.td,{children:"The identifier for the stored property."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"reference"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"ipfs://QmYw..."})}),(0,r.jsx)(s.td,{children:"The URL or metalink directing to the externally hosted file."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"encoding"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"markdown"})}),(0,r.jsx)(s.td,{children:"Specifies the file's encoding type."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"hash"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"string"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"e3b0c442..."})}),(0,r.jsx)(s.td,{children:"The SHA256 checksum, ensuring the file's authenticity."})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"size"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"uint64"})}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"1024"})}),(0,r.jsx)(s.td,{children:"Denotes the file size in Bytes."})]})]})]}),"\n",(0,r.jsx)(s.h2,{id:"aa1f125af47f4ab7886fd90029d3380c",children:"CLI Syntax & Examples"}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["Each CLI command and proposal process in KIRA requires specific permissions. These permissions must be added to the account's whitelist or obtained as sudo permissions for direct changes. Refer to the ",(0,r.jsx)(s.a,{href:"/docs/roles-permissions",children:"Roles & Permissions"})," documentation for more details."]})}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"$SIGNER"})," represents the transaction signer's account name or address. For instructions on setting common flags as environment variables, such as ",(0,r.jsx)(s.code,{children:"$FLAGS_TX"})," and ",(0,r.jsx)(s.code,{children:"$FLAGS_QR"}),", see the ",(0,r.jsx)(s.a,{href:"/docs/cli-guide",children:"CLI Guide"})," page."]})}),"\n",(0,r.jsxs)(a.Z,{children:[(0,r.jsxs)(i.Z,{value:"transactions",label:"Transactions",children:[(0,r.jsx)(s.h2,{id:"cc4eddd5aac24ddb9729522a78cf8320",children:"Transactions"}),(0,r.jsx)(s.p,{children:"There is no transactions other than the governance proposals for this sub-module"})]}),(0,r.jsxs)(i.Z,{value:"queries",label:"Queries",children:[(0,r.jsx)(s.h2,{id:"798c5d84060149699bbef79082f10ee0",children:"Queries"}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.code,{children:"data-registry-keys"})}),(0,r.jsx)(s.th,{children:"Retrieve a list of all keys in the Data Registry."})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"data-registry"})}),(0,r.jsx)(s.td,{children:"Retrieve data associated with a specific key."})]})})]}),(0,r.jsx)(s.h4,{id:"281888dffb9e4bc28f293e3f95c9ce67",children:"Query All Keys"}),(0,r.jsxs)(s.p,{children:["Retrieve a list of all keys in the Data Registry using the ",(0,r.jsx)(s.code,{children:"data-registry-keys"})," command."]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:'sekaid query customgov data-registry-keys --page-key=100000 $FLAGS_QR | jq ".keys"\n'})}),(0,r.jsx)(s.h4,{id:"9abdf7548d2343979a7f7ad7a714d03f",children:"Query Data by Key"}),(0,r.jsxs)(s.p,{children:["Retrieve data associated with a specific key using the ",(0,r.jsx)(s.code,{children:"data-registry"})," command."]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Args"})}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"$"})}),(0,r.jsx)(s.code,{children:"KEY"}),": The key whose data is to be queried."]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-shell",children:"sekaid query customgov data-registry $KEY $FLAGS_QR | jq\n"})})]}),(0,r.jsxs)(i.Z,{value:"governance",label:"Governance",children:[(0,r.jsx)(s.h2,{id:"ef81400b9e8b406d93ba0411684f97f8",children:"Governance"}),(0,r.jsx)(s.table,{children:(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:(0,r.jsx)(s.code,{children:"upsert-data-registry"})}),(0,r.jsx)(s.th,{children:"Create a proposal for adding or updating a key in the Data Registry."})]})})}),(0,r.jsx)(s.h4,{id:"47c2dcd1257a49ccbfae4ad5fdcf49cf",children:"Create or Edit a Data Registrey Key"}),(0,r.jsxs)(s.p,{children:["The CLI command, ",(0,r.jsx)(s.code,{children:"upsert-data-registry"}),", is utilized to create a proposal for adding or updating a key in the Data Registry. The command accepts the following arguments and flags:"]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Args"})}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"$KEY"}),": The key intended to be upserted in the Data Registry."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"$CHECKSUM"}),": The checksum corresponding to the data associated with the key."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"$VALUE"}),": The value tied to the key."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"$FILETYPE"}),": Specifies the type of the file or data that's related to the key."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"$SIZE"}),": The size of the file or data linked to the key."]}),"\n"]}),(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Flags"})}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"$TITLE"}),": The title of the proposal. Typically in the form \"Upserting Data Registry key '$KEY'\"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"$DESCRIPTION"}),": The description of the proposal, often described as \"Assign value '",(0,r.jsxs)(s.span,{className:"katex",children:[(0,r.jsx)(s.span,{className:"katex-mathml",children:(0,r.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(s.semantics,{children:[(0,r.jsxs)(s.mrow,{children:[(0,r.jsx)(s.mi,{children:"V"}),(0,r.jsx)(s.mi,{children:"A"}),(0,r.jsx)(s.mi,{children:"L"}),(0,r.jsx)(s.mi,{children:"U"}),(0,r.jsxs)(s.msup,{children:[(0,r.jsx)(s.mi,{children:"E"}),(0,r.jsx)(s.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u2032"})]}),(0,r.jsx)(s.mi,{children:"t"}),(0,r.jsx)(s.mi,{children:"o"}),(0,r.jsx)(s.mi,{children:"k"}),(0,r.jsx)(s.mi,{children:"e"}),(0,r.jsxs)(s.msup,{children:[(0,r.jsx)(s.mi,{children:"y"}),(0,r.jsx)(s.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:"\u2032"})]})]}),(0,r.jsx)(s.annotation,{encoding:"application/x-tex",children:"VALUE' to key '"})]})})}),(0,r.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,r.jsxs)(s.span,{className:"base",children:[(0,r.jsx)(s.span,{className:"strut",style:{height:"0.9463em",verticalAlign:"-0.1944em"}}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"A"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"LU"}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"E"}),(0,r.jsx)(s.span,{className:"msupsub",children:(0,r.jsx)(s.span,{className:"vlist-t",children:(0,r.jsx)(s.span,{className:"vlist-r",children:(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.7519em"},children:(0,r.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsx)(s.span,{className:"mord mtight",children:(0,r.jsx)(s.span,{className:"mord mtight",children:"\u2032"})})})]})})})})})]}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"o"}),(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"}),(0,r.jsx)(s.span,{className:"mord mathnormal",children:"e"}),(0,r.jsxs)(s.span,{className:"mord",children:[(0,r.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,r.jsx)(s.span,{className:"msupsub",children:(0,r.jsx)(s.span,{className:"vlist-t",children:(0,r.jsx)(s.span,{className:"vlist-r",children:(0,r.jsx)(s.span,{className:"vlist",style:{height:"0.7519em"},children:(0,r.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,r.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsx)(s.span,{className:"mord mtight",children:(0,r.jsx)(s.span,{className:"mord mtight",children:"\u2032"})})})]})})})})})]})]})})]}),"KEY'\"."]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:'sekaid tx customgov proposal upsert-data-registry \\\n--from=$SIGNER $FLAGS_TX \\\n--title=$TITLE --description=$DESCRIPTION \\\n "$KEY" "$CHECKSUM" "$VALUE" "$FILETYPE" "$SIZE" \n'})})]})]})]})}function m(e={}){const{wrapper:s}={...(0,n.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},5162:(e,s,t)=>{t.d(s,{Z:()=>i});t(7294);var r=t(6905);const n={tabItem:"tabItem_Ymn6"};var a=t(5893);function i(e){let{children:s,hidden:t,className:i}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)(n.tabItem,i),hidden:t,children:s})}},4866:(e,s,t)=>{t.d(s,{Z:()=>k});var r=t(7294),n=t(6905),a=t(2466),i=t(6550),l=t(469),d=t(1980),c=t(7392),o=t(12);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:s,children:t}=e;return(0,r.useMemo)((()=>{const e=s??function(e){return h(e).map((e=>{let{props:{value:s,label:t,attributes:r,default:n}}=e;return{value:s,label:t,attributes:r,default:n}}))}(t);return function(e){const s=(0,c.l)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,t])}function m(e){let{value:s,tabValues:t}=e;return t.some((e=>e.value===s))}function x(e){let{queryString:s=!1,groupId:t}=e;const n=(0,i.k6)(),a=function(e){let{queryString:s=!1,groupId:t}=e;if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:s,groupId:t});return[(0,d._X)(a),(0,r.useCallback)((e=>{if(!a)return;const s=new URLSearchParams(n.location.search);s.set(a,e),n.replace({...n.location,search:s.toString()})}),[a,n])]}function p(e){const{defaultValue:s,queryString:t=!1,groupId:n}=e,a=u(e),[i,d]=(0,r.useState)((()=>function(e){let{defaultValue:s,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!m({value:s,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:s,tabValues:a}))),[c,h]=x({queryString:t,groupId:n}),[p,j]=function(e){let{groupId:s}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(s),[n,a]=(0,o.Nk)(t);return[n,(0,r.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:n}),g=(()=>{const e=c??p;return m({value:e,tabValues:a})?e:null})();(0,l.Z)((()=>{g&&d(g)}),[g]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);d(e),h(e),j(e)}),[h,j,a]),tabValues:a}}var j=t(2389);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=t(5893);function b(e){let{className:s,block:t,selectedValue:r,selectValue:i,tabValues:l}=e;const d=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.o5)(),o=e=>{const s=e.currentTarget,t=d.indexOf(s),n=l[t].value;n!==r&&(c(s),i(n))},h=e=>{let s=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;s=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;s=d[t]??d[d.length-1];break}}s?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.Z)("tabs",{"tabs--block":t},s),children:l.map((e=>{let{value:s,label:t,attributes:a}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:r===s?0:-1,"aria-selected":r===s,ref:e=>d.push(e),onKeyDown:h,onClick:o,...a,className:(0,n.Z)("tabs__item",g.tabItem,a?.className,{"tabs__item--active":r===s}),children:t??s},s)}))})}function y(e){let{lazy:s,children:t,selectedValue:n}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(s){const e=a.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:a.map(((e,s)=>(0,r.cloneElement)(e,{key:s,hidden:e.props.value!==n})))})}function v(e){const s=p(e);return(0,f.jsxs)("div",{className:(0,n.Z)("tabs-container",g.tabList),children:[(0,f.jsx)(b,{...e,...s}),(0,f.jsx)(y,{...e,...s})]})}function k(e){const s=(0,j.Z)();return(0,f.jsx)(v,{...e,children:h(e.children)},String(s))}},1151:(e,s,t)=>{t.d(s,{Z:()=>l,a:()=>i});var r=t(7294);const n={},a=r.createContext(n);function i(e){const s=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(a.Provider,{value:s},e.children)}}}]);